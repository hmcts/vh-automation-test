parameters:
  - name: results
    type: string
  - name: triggerID
    type: string
  - name: type
    type: string

steps:
  - powershell: |
      $params = @
                "type"="${{ parameters.type }}"
                "results"="${{ parameters.results }}";
                "link"="$(Build.BuildUri)";
                }
      $triggerID = "${{ parameters.triggerID }}"
      $uri = "https://hooks.slack.com/triggers/$triggerID"
      Invoke-WebRequest -Uri $uri -Method POST -Body ($params|ConvertTo-Json) -ContentType "application/json"
    condition: always()
    displayName: post to Slack
