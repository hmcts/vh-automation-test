parameters:
  - name: environment
    type: string
    default: 'Dev'
  - name: runOnSauceLabs
    type: boolean
    default: true
  - name: runHeadlessBrowser
    type: boolean
    default: false
  - name: adminWebOverrideUrl
    type: string
    default: ' '
  - name: videoWebOverrideUrl
    type: string
    default: ' '

variables:
  - name: projectPath
    value: 'UI.AutomationTests'
  - name: env
    value: ${{ lower(replace(parameters.environment, 'stg', 'staging')) }}
  - name: subscriptionName
    value: 'DTS-SHAREDSERVICES-${{ upper(parameters.environment) }}-Video Hearings'
  - name: SystemConfiguration.EnvironmentConfigSettings.RunOnSauceLabs
    value: ${{ parameters.runOnSauceLabs }}
  - name: SystemConfiguration.EnvironmentConfigSettings.RunHeadlessBrowser
    value: ${{ parameters.runHeadlessBrowser }}
  - name: SystemConfiguration.EnvironmentConfigSettings.RunHeadlessBrowser
    value: true
  - name: SystemConfiguration.EnvironmentConfigSettings.SauceLabsConfiguration.SauceUsername
    value: $(Saucelabs:Username)
  - name: SystemConfiguration.EnvironmentConfigSettings.SauceLabsConfiguration.SauceAccessKey
    value: $(Saucelabs:AccessKey)
  - name: SystemConfiguration.EnvironmentConfigSettings.UKConferencePhoneNumber
    value: $(ConferencePhoneNumber)

  - ${{ if eq(parameters.adminWebOverrideUrl, ' ') }}:
      - name: SystemConfiguration.EnvironmentConfigSettings.AdminUrl
        value: ${{ variables.adminWebUrl }}
  - ${{ else }}:
      - name: SystemConfiguration.EnvironmentConfigSettings.AdminUrl
        value: ${{ parameters.adminWebOverrideUrl }}

  - ${{ if eq(parameters.videoWebOverrideUrl, ' ') }}:
      - name: SystemConfiguration.EnvironmentConfigSettings.VideoUrl
        value: ${{ variables.videoWebUrl }}
  - ${{ else }}:
      - name: SystemConfiguration.EnvironmentConfigSettings.VideoUrl
        value: ${{ parameters.videoWebOverrideUrl }}

  - name: SystemConfiguration.EnvironmentConfigSettings.Environment
    value: ${{ parameters.environment }}

  - name: SystemConfiguration.LogLocation
    value: $(Build.ArtifactStagingDirectory)/TestResults/Logs
  - name: SystemConfiguration.EnvironmentConfigSettings.TestResultsDirectory
    value: $(Build.ArtifactStagingDirectory)/TestResults/
  - name: SystemConfiguration.EnvironmentConfigSettings.ReportLocation
    value: $(Build.ArtifactStagingDirectory)/UITestReports/
